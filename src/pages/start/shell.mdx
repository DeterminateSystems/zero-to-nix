---
layout: ../../layouts/Step.astro
title: Create a shell environment using Nix
summary:
  [
    "Initialize a starter project in the language of your choice",
    "Explore a Nix shell environment for your preferred language",
    "Run some commands inside the shell",
  ]
weight: 2
---

import Language from "../../components/Language";
import Languages from "../../components/Languages";
import Shell from "../../components/Shell";
import Snippet from "../../components/Snippet";
import SpecificLanguage from "../../components/SpecificLanguage";

[Nix] enables you to create <Snippet id="shell-environments" show="shell environments" client:only />
that are "sealed" from the rest of your system&mdash;they ignore directories like `/usr/bin` and
only use packages available in the <Snippet id="nix-store" show="Nix store" client:only />. To get
started, tell us which language you prefer:

<Languages client:only />

To get started in your <Language client:only /> project, create an empty directory and initialize
a <Snippet id="flake-templates" show="flake template" client:only /> for your
preferred language:

<Shell client:only />

Once the template has been initialized, run `ls .` to see the contents of the directory, which
should include two important files:

- The `flake.nix` file defines the <Snippet id="flakes" show="flake" client:only /> for your project.
- The `flake.lock` <Snippet id="pinning" show="pins" client:only /> all of the
  <Snippet id="flake-inputs" show="flake inputs" client:only />
  &mdash;essentially the Nix dependencies&mdash;in your `flake.nix` file to specific
  [Git revisions][rev].

## Exploring the Nix shell for <Language client:only />

One of the <Snippet id="flake-outputs" show="outputs" client:only /> of this Nix <Snippet id="flakes" show="flake" client:only />
is a <Snippet id="shell-environments" show="shell environment" client:only /> for <Language client:only />.
To enter that shell environment:

```shell
nix develop
```

Now that we've entered the shell, we can do some exploring, starting with <Snippet id="nix-store" show="Nix store paths" client:only />.


<SpecificLanguage lang="Go" client:only>
Ordinarily when you run `which go` on a Unix system, you get a path like `/usr/bin/go`. Try running it in the Nix shell:

```shell
which go
```

You should see a (rather strange) path like this:

```shell
/nix/store/hvnp4a2wlqhfx6yfvfm4zw0vxh3jadzh-go-1.19.3/bin/go
```
</SpecificLanguage>
<SpecificLanguage lang="Rust" client:only>
Ordinarily when you run `which cargo` on a Unix system, you get a path like `/usr/bin/cargo`. Try running it in the Nix shell:

```shell
which cargo
```

You should see a (rather strange) path like this:

```shell
/nix/store/zc1nr87147gvmg5nqci8q5cfnzg82vwp-rust-default-1.64.0/bin/cargo
```
</SpecificLanguage>

Probably not what you expected! What happened here? A few things:

- Nix looked at the `devShells` <Snippet id="flake-outputs" show="output" client:only /> in
  `flake.nix` to figure out which <Snippet id="packages" show="Nix packages" client:only /> to
  include in the shell environment (Nix specifically looked at the `buildInputs` array).
- Nix built the packages specified under `buildInputs` and stored them in the
  <Snippet id="nix-store" show="Nix store" client:only /> under `/nix/store`.

[cargo]: https://doc.rust-lang.org/cargo
[nix]: https://nixos.org
[rev]: https://git-scm.com/docs/revisions
